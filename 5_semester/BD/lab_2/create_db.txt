CREATE TABLE owner (
	passport VARCHAR(11) PRIMARY KEY,
	surname VARCHAR(255),
	name VARCHAR(255),
	patronymic VARCHAR(255)
); 

CREATE TABLE ring (
	ring_number serial PRIMARY KEY
);

CREATE TABLE breed (
	breed_name VARCHAR(255) PRIMARY KEY,
	ring_number serial,
	FOREIGN KEY (ring_number) REFERENCES ring (ring_number)
);

CREATE TABLE club (
	club_id serial PRIMARY KEY,
	club_name VARCHAR(255),
	participants_number INT
);

CREATE TABLE expert (
	expert_id serial PRIMARY KEY,
	surname VARCHAR(255),
	name VARCHAR(255),
	club_id serial,
	ring_number serial,
	FOREIGN KEY (club_id) REFERENCES club (club_id),
	FOREIGN KEY (ring_number) REFERENCES ring (ring_number)
);

CREATE TABLE dog (
	dog_number serial PRIMARY KEY,
	owner_passport VARCHAR(11),
	breed_name VARCHAR(255),
	FOREIGN KEY (owner_passport) REFERENCES owner (passport),
	FOREIGN KEY (breed_name) REFERENCES breed (breed_name),
	pedigree_document_number INT NOT NULL,
	mother_nickname VARCHAR(255),
	father_nickname VARCHAR(255),
	nickname VARCHAR(255),
	age INT,
	vaccination_date DATE
);

CREATE TABLE dog_expert_estimate (
	dog_number serial,
	expert_id serial,
	FOREIGN KEY (dog_number) REFERENCES dog (dog_number),
	FOREIGN KEY (expert_id) REFERENCES expert (expert_id),
	estimate INT,
	PRIMARY KEY (dog_number, expert_id)
);

CREATE TABLE club_numbers (
	dog_number serial,
	club_id serial,
	FOREIGN KEY (dog_number) REFERENCES dog (dog_number),
	FOREIGN KEY (club_id) REFERENCES club (club_id),
	PRIMARY KEY (dog_number, club_id)
);
